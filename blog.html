<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Duc</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo"><img src="images/logo/logo.png" alt="Logo" class="logo-img"><span>DUC</span></div>
            <nav>
                <ul>
                    <li><a href="index.html"><span class="hash">#</span>home</a></li>
                    <li><a href="blog.html" class="active"><span class="hash">#</span>blog</a></li>
                    <li><a href="index.html#contacts"><span class="hash">#</span>contacts</a></li>
                </ul>
            </nav>
        </header>

        <div class="page-title-section">
            <h1 class="page-title"><span class="hash">/</span>blog</h1>
            <p class="page-subtitle">My stories about Study, Work & Life</p>
        </div>

        <div class="blog-categories">
            <button class="cat-btn active" onclick="filterPosts('all')">All</button>
            <button class="cat-btn" onclick="filterPosts('study')">Chuyện học</button>
            <button class="cat-btn" onclick="filterPosts('work')">Chuyện làm thêm</button>
            <button class="cat-btn" onclick="filterPosts('life')">Chuyện sinh hoạt chung</button>
        </div>

        <div id="blog-list" class="blog-grid">
            </div>

        <footer>
            <div class="copyright">© Copyright 2025. Made by Đức</div>
        </footer>
    </div>

    <script src="blog-data.js"></script>
    <script>
        const listContainer = document.getElementById('blog-list');
        const buttons = document.querySelectorAll('.cat-btn');

        // Hàm hiển thị bài viết
        function renderPosts(posts) {
    listContainer.innerHTML = '';
    
    if(posts.length === 0) {
        listContainer.innerHTML = '<p style="color:var(--gray)">Chưa có bài viết nào ở mục này...</p>';
        return;
    }

    posts.forEach(post => {
        const card = document.createElement('div');
        card.className = 'blog-card vertical-layout'; // Thêm class vertical-layout
        
        // Xử lý badge màu
        let badgeClass = 'badge-default';
        if(post.category === 'study') badgeClass = 'badge-study';
        if(post.category === 'work') badgeClass = 'badge-work';
        if(post.category === 'life') badgeClass = 'badge-life';

        let catName = post.category.toUpperCase(); // Viết hoa tên mục

        // HTML cấu trúc mới: Ảnh to bên trên -> Nội dung bên dưới
        card.innerHTML = `
            <a href="post.html?id=${post.id}" class="blog-thumb-link">
                <img src="${post.image}" alt="${post.title}" class="blog-thumbnail">
            </a>
            <div class="blog-content-wrapper">
                <div class="blog-meta-top">
                    <span class="blog-badge ${badgeClass}">${catName}</span>
                    <span class="blog-date">${post.date}</span>
                </div>
                <h2 class="blog-title font-text">
                    <a href="post.html?id=${post.id}">${post.title}</a>
                </h2>
                <p class="blog-summary font-text">${post.summary}</p>
                <a href="post.html?id=${post.id}" class="read-more">Đọc tiếp &rarr;</a>
            </div>
        `;
        listContainer.appendChild(card);
    });
}

        // Hàm lọc bài viết
        function filterPosts(category) {
            // 1. Cập nhật nút Active
            buttons.forEach(btn => btn.classList.remove('active'));
            // Tìm nút vừa bấm để thêm class active (dựa vào text hoặc logic click - ở đây xử lý đơn giản bằng event)
            event.target.classList.add('active');

            // 2. Lọc dữ liệu
            if (category === 'all') {
                renderPosts(blogPosts);
            } else {
                const filtered = blogPosts.filter(post => post.category === category);
                renderPosts(filtered);
            }
        }

        // Mặc định load tất cả bài viết khi vào trang
        renderPosts(blogPosts);
    </script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        // Tạo thẻ canvas
        var canvas = document.createElement("canvas");
        canvas.style.position = "fixed";
        canvas.style.top = "0";
        canvas.style.left = "0";
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        canvas.style.pointerEvents = "none"; // Để tuyết không chặn chuột click
        canvas.style.zIndex = "9999"; // Đè lên mọi thứ (nếu muốn tuyết rơi sau chữ thì đổi thành -1)
        document.body.appendChild(canvas);

        var ctx = canvas.getContext("2d");
        var width = window.innerWidth;
        var height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;

        // Cấu hình số lượng và tốc độ tuyết
        var maxFlakes = 100; // Số lượng bông tuyết (giảm nếu lag)
        var flakes = [];

        // Tạo mảng bông tuyết
        for (var i = 0; i < maxFlakes; i++) {
            flakes.push({
                x: Math.random() * width,
                y: Math.random() * height,
                r: Math.random() * 2 + 1, // Kích thước bông tuyết (1px - 3px)
                d: Math.random() + 1      // Tỷ trọng (tốc độ rơi)
            });
        }

        // Hàm vẽ tuyết
        function drawFlakes() {
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = "rgba(255, 255, 255, 0.8)"; // Màu trắng, hơi mờ
            ctx.beginPath();
            
            for (var i = 0; i < maxFlakes; i++) {
                var f = flakes[i];
                ctx.moveTo(f.x, f.y);
                ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
            }
            ctx.fill();
            moveFlakes();
        }

        // Hàm di chuyển tuyết
        var angle = 0;
        function moveFlakes() {
            angle += 0.01;
            for (var i = 0; i < maxFlakes; i++) {
                var f = flakes[i];
                
                // Cập nhật vị trí Y (rơi xuống) và X (lắc lư theo gió)
                f.y += Math.pow(f.d, 2) + 1; // Tốc độ rơi
                f.x += Math.sin(angle) * 2;

                // Nếu tuyết rơi xuống đáy, đưa nó lên lại đỉnh
                if (f.y > height) {
                    flakes[i] = {
                        x: Math.random() * width,
                        y: 0,
                        r: f.r,
                        d: f.d
                    };
                }
            }
        }

        // Vòng lặp animation
        setInterval(drawFlakes, 25);

        // Xử lý khi co giãn màn hình
        window.onresize = function() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }
    });
</script>
</body>
</html>